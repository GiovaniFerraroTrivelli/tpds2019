<ng-template #content let-modal>
	<div class="modal-header">
	  <h4 class="modal-title">Seleccione el cliente</h4>
	  <button type="button" class="close" aria-label="Close" (click)="cancelarBusquedaCliente(modal)">
		<span aria-hidden="true">&times;</span>
	  </button>
	</div>

	<div class="modal-body">
		<div class="alert alert-light">
			<h5><strong>Criterios de búsqueda aplicados</strong></h5>
			<div class="row font-weight-light">
		  		<div class="col-4"><small>Id de cliente: {{ buscarClienteForm.value.idCliente == "" ? "sin filtros" : buscarClienteForm.value.idCliente }}</small></div>
		  		<div class="col-4"><small>Nombre: {{ buscarClienteForm.value.nombre == "" ? "sin filtros" : buscarClienteForm.value.nombre }}</small></div>
		  		<div class="col-4"><small>Apellido: {{ buscarClienteForm.value.apellido == "" ? "sin filtros" : buscarClienteForm.value.apellido }}</small></div>
		  		<div class="col-4"><small>Tipo de documento: {{ buscarClienteForm.value.tipoDocumento == "" ? "sin filtros" : buscarClienteForm.value.tipoDocumento }}</small></div>
		  		<div class="col-4"><small>Nro. documento: {{ buscarClienteForm.value.nroDocumento == null ? "sin filtros" : buscarClienteForm.value.nroDocumento }}</small></div>
		  	</div>
		</div>

		<table class="table table-hover">
			<thead>
			  <tr>
				<th width="25%" scope="col">Número de Cliente</th>
				<th width="45%" scope="col">Apellido y Nombre</th>
				<th width="30%" scope="col">Documento</th>
			  </tr>
			</thead>
			<tbody>
			  <tr *ngFor='let resultado of resultados' [ngClass]="['cursor-pointer' , (getSelectedClient() ? 'table-active' : '') ]" (click)='loadSelectedClient(resultado)'>
				<th scope="row">{{resultado.idCliente}}</th>
				<td>{{resultado.apellido}}, {{resultado.nombre}}</td>
				<td>{{resultado.documento.tipoDocumento}} {{resultado.documento.nroDocumento | number: '' : 'es-AR' }}</td>
			  </tr>			  
			</tbody>
		  </table>
	</div>
	<div class="modal-footer">
	  <button type="button" class="btn btn-light" (click)="cancelarBusquedaCliente(modal)">Cancelar</button>
	  <button type="button" class="btn btn-primary" (click)="seleccionarCliente(modal)">Seleccionar</button>
	</div>
</ng-template>

<form #buscarClienteForm="ngForm" (ngSubmit)="onSubmit(buscarClienteForm, content)">
	<div class="row">      
		<div class="form-group col-sm-9 col-lg-4">
			<label class="pt-2" for="idCliente">Nro. de cliente</label>
			<div class="input-group">
				<div class="input-group-prepend">
					<div class="input-group-text">#</div>
				</div>
				<input type="number" ngModel name="idCliente" id="idCliente" class="form-control dis-arrows optional">
			</div>
		</div>
		<div class="form-group col-sm-9 col-lg-4">
			<label class="pt-2" for="nombre">Nombre</label>
			<div class="input-group">
				<input type="text" ngModel name="nombre" id="nombre" class="form-control optional">
			</div>
		</div>
		<div class="form-group col-sm-9 col-lg-4">
			<label class="pt-2" for="apellido">Apellido</label>
			<div class="input-group">
				<input type="text" ngModel name="apellido" id="apellido" class="form-control optional">
			</div>
		</div>
		<div class="form-group col-sm-9 col-lg-4">
			<label class="pt-2" for="tipoDocumento">Documento</label>
			
			<select ngModel name="tipoDocumento" class="form-control optional" id="tipoDocumento">
				<option value="{{ enum.key }}" *ngFor="let enum of TipoDNI | keyvalue">{{ enum.key }}</option>
			</select>
		</div>
		<div class="form-group col-sm-9 col-lg-8">
			<label class="pt-2" for="numeroDocumento">Número de documento</label>
			<input type="number" ngModel name="numeroDocumento" id="numeroDocumento" class="form-control optional dis-arrows">
		</div>
		<button [disabled]="!isValidForm(buscarClienteForm) || !loadingService.isHidden()" type="submit" class="btn btn-primary ml-auto pull-right" id="buscarCliente">Buscar</button>
	</div>
</form>
<hr />
